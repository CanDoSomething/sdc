{"version":3,"sources":["webpack:///js/10.fbedf484ba2fed9f0fde.js","webpack:///./src/chart/index.vue?28b6","webpack:///./src/chart/index.vue?782a","webpack:///./src/chart/index.vue?7d53","webpack:///./src/chart/chartSocket.js","webpack:///./src/chart/index.vue","webpack:///./src/chart/index.vue?910d"],"names":["webpackJsonp","P0Bz","module","exports","__webpack_require__","push","i","version","sources","names","mappings","file","sourcesContent","sourceRoot","THry","content","locals","Yid5","__webpack_exports__","injectStyle","ssrContext","Object","defineProperty","value","request","promise","promise_default","n","stringify","stringify_default","helpers_extends","extends_default","vuex_esm","chartSocket","name","data","ws","otherImg","computed","mapState","openid","state","user","selfImg","infoObj","teaHeadimgurl","stuHeadimgurl","mounted","this","initWebsocket","methods","url","WebSocket","onopen","websocketonopen","onmessage","websocketonmessage","onerror","websocketonerror","onclose","websocketclose","addGroup","res","resData","JSON","parse","opttype","recSocketMsg","console","log","initWebSocket","websocketsend","req","send","e","addusername","groupname","courseId","username","sendSocketMsg","msg","_this","type","a","resolve","getInfo","then","sendMsgFn","_getImg","_this2","method","Number","code","obj","selectortype_script_index_0_src_chart","mixins","courseName","teaName","courseTime","chartList","sendMsg","doingList","btnDisabled","teaOpenid","$store","stuOpenid","userType","getDoingList","clickSend","time","Date","toTimeString","split","role","text","$nextTick","document","querySelector","scrollTop","getTime","str","loading","undefined","filter","item","teaCourse","courseStatus","map","courseDate","courseStartTime","courseEndTime","teaBase","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","_l","length","attrs","src","_e","directives","rawName","expression","domProps","on","keyup","$event","_k","keyCode","key","input","target","composing","class","btn-disabled","click","stopPropagation","staticRenderFns","esExports","selectortype_template_index_0_src_chart","normalizeComponent","__vue_styles__","Component"],"mappings":"AAAAA,cAAc,KAERC,KACA,SAAUC,EAAQC,EAASC,GCHjCD,EAAAD,EAAAC,QAA2BC,EAAQ,SAA+C,GAKlFD,EAAAE,MAAcH,EAAAI,EAAS,6vEAA2vE,IAAUC,QAAA,EAAAC,SAAA,4CAAAC,SAAAC,SAAA,m+BAAqjCC,KAAA,YAAAC,gBAAA,8vEAAqyEC,WAAA,ODYhnLC,KACA,SAAUZ,EAAQC,EAASC,GEfjC,GAAAW,GAAcX,EAAQ,OACtB,iBAAAW,SAA4Cb,EAAAI,EAASS,EAAA,MACrDA,EAAAC,SAAAd,EAAAC,QAAAY,EAAAC,OAEaZ,GAAQ,QAA6D,WAAAW,GAAA,OFwB5EE,KACA,SAAUf,EAAQgB,EAAqBd,GAE7C,YGlCA,SAAAe,GAAAC,GACEhB,EAAQ,QHkCViB,OAAOC,eAAeJ,EAAqB,cAAgBK,OAAO,GAGlE,IAAIC,GAAUpB,EAAoB,QAG9BqB,EAAUrB,EAAoB,QAC9BsB,EAA+BtB,EAAoBuB,EAAEF,GAGrDG,EAAYxB,EAAoB,QAChCyB,EAAiCzB,EAAoBuB,EAAEC,GAGvDE,EAAkB1B,EAAoB,QACtC2B,EAA+B3B,EAAoBuB,EAAEG,GAGrDE,EAAW5B,EAAoB,QInDnC6B,GACEC,KAAM,aACNC,KAFa,WAGX,OACEC,GAAI,KACJC,SAAU,KAGdC,gBACKC,aACDC,OAAQ,SAAAC,GAAA,MAASA,GAAMC,KAAKF,QAC5BG,QAAS,SAAAF,GAAA,MAASA,GAAMC,KAAKE,QAAQC,eAAiBJ,EAAMC,KAAKE,QAAQE,kBAI7EC,QAfa,WAgBXC,KAAKC,iBAEPC,SACED,cADO,WAEL,GAAgB,OAAZD,KAAKZ,GAAa,CACpB,GAAMe,GAAM,uCAAyCH,KAAKR,MAC1DQ,MAAKZ,GAAK,GAAIgB,WAAUD,GAExBH,KAAKZ,GAAGiB,OAASL,KAAKM,gBACtBN,KAAKZ,GAAGmB,UAAYP,KAAKQ,mBACzBR,KAAKZ,GAAGqB,QAAUT,KAAKU,iBACvBV,KAAKZ,GAAGuB,QAAUX,KAAKY,iBAG3BN,gBAZO,WAaLN,KAAKa,YAGPL,mBAhBO,SAgBaM,GAClB,GAAMC,GAAUC,KAAKC,MAAMH,EAAI3B,KACP,qBAApB4B,EAAQG,SACVlB,KAAKmB,aAAaJ,GAEpBK,QAAQC,IAAIN,IAEdL,iBAvBO,WAwBLV,KAAKsB,iBAEPC,cA1BO,SA0BQC,GACbxB,KAAKZ,GAAGqC,KAAK5C,IAAe2C,KAE9BZ,eA7BO,SA6BSc,GACdN,QAAQC,IAAI,OAAQK,IAGtBb,SAjCO,WAkCL,GAAMW,IACJG,YAAa3B,KAAKR,OAClBoC,UAAW5B,KAAK6B,SAChBX,QAAS,kBACTY,SAAU9B,KAAKR,OAEjBQ,MAAKuB,cAAcC,IAGrBO,cA3CO,SA2CQC,GACb,GAAMR,IACJzD,QAASiE,EACTJ,UAAW5B,KAAK6B,SAChBX,QAAS,kBACTY,SAAU9B,KAAKR,OAEjBQ,MAAKuB,cAAcC,IAGrBL,aArDO,SAqDOhC,GAAM,GAAA8C,GAAAjC,IAClBoB,SAAQC,IAAIlC,EACZ,IAAM+C,GAAQ/C,EAAK2C,WAAa9B,KAAKR,OAAU,OAAS,OACxD4B,SAAQC,IAAIa,GACZ,GAAAxD,GAAAyD,EAAY,SAACC,GACXH,EAAKI,QAAQlD,EAAK2C,SAAUI,EAAME,KACjCE,KAAK,WACNL,EAAKM,UAAUL,EAAM/C,EAAKpB,YAG9BsE,QA/DO,SA+DE7C,EAAQ0C,EAAME,GACR,SAATF,GAAuC,KAApBlC,KAAA,SACrBA,KAAKwC,QAAQhD,EAAQ,OAAQ4C,GAElB,UAATF,GAAyC,KAArBlC,KAAA,UACtBA,KAAKwC,QAAQhD,EAAQ,QAAS4C,IAGlCI,QAvEO,SAuEEhD,EAAQ0C,EAAME,GAAS,GAAAK,GAAAzC,IAC9BxB,cACE2B,IAAK,yDAA2DX,EAChEkD,OAAQ,QACPJ,KAAK,SAAAxB,GAEN,GADAsB,IAC8B,IAA1BO,OAAO7B,EAAI3B,KAAKyD,MAAa,CAC/B,GAAMC,GAAM/B,EAAI3B,KAAKA,IACrBiC,SAAQC,IAAI,MAAOwB,EAAKX,GACxBO,EAAKP,EAAO,OAASW,EAAI/C,eAAiB+C,EAAIhD,gBAE/C,OCnDMiD,GACb5D,KAAM,QACN6D,QAAS9D,GACTE,KAHa,WAIX,OACE6D,WAAY,GACZC,QAAS,GACTC,WAAY,GACZC,aACAC,QAAS,GACTvB,SAAU,KACVwB,eAGJ/D,UACEgE,YADQ,WAEN,MAAwB,KAAjBtD,KAAKoD,SAEdG,UAJQ,WAKN,MAAOvD,MAAKwD,OAAO/D,MAAMC,KAAKE,QAAQ2D,WAAa,IAErDE,UAPQ,WAQN,MAAOzD,MAAKwD,OAAO/D,MAAMC,KAAKE,QAAQ6D,WAAa,IAErDC,SAVQ,WAWN,MAAO1D,MAAKwD,OAAO/D,MAAMC,KAAKgE,WAGlC3D,QA5Ba,WA6BXC,KAAK2D,gBAEPzD,SACE0D,UADO,WAEL5D,KAAK+B,cAAc/B,KAAKoD,SACxBpD,KAAKuC,UAAU,OAAQvC,KAAKoD,UAE9Bb,UALO,SAKIL,EAAMF,GAEf,GADAZ,QAAQC,IAAI,KAAMa,EAAMF,GACZ,KAARA,EAAJ,CAGA,GAAM6B,IAAO,GAAIC,OAAOC,eAAeC,MAAM,KAAK,EAClDhE,MAAKmD,UAAU9F,MACbwG,KAAMA,EACNI,KAAM/B,EACNgC,KAAMlC,IAERhC,KAAKmE,UAAU,WACbC,SAASC,cAAc,sBAAsBC,UAAY,SAE9C,SAATpC,IACFlC,KAAKoD,QAAU,MAGnBmB,QAvBO,SAuBEC,GAGP,MAFaA,GAAIR,MAAM,KAAK,GAAGA,MAAM,KAAK,GAE5B,IADFQ,EAAIR,MAAM,KAAK,GAAGA,MAAM,KAAK,IAG3CL,aA5BO,WA4BS,GAAA1B,GAAAjC,KACVG,EAAM,EACY,aAAlBH,KAAK0D,UACPvD,EAAM,uDACNA,GAAO,cAAgBH,KAAKuD,UAAY,yBACb,YAAlBvD,KAAK0D,WACdvD,EAAM,8CACNA,GAAO,cAAgBH,KAAKyD,UAAY,yBAE1CjF,aACE2B,IAAKA,EACLuC,OAAQ,QACPJ,KAAK,SAAAxB,GACNmB,EAAKwC,SAAU,EACO,IAAlB3D,EAAI3B,KAAKyD,UAAgC8B,KAAlB5D,EAAI3B,KAAKA,OAClC8C,EAAKoB,UAAYvC,EAAI3B,KAAKA,KAAKwF,OAAO,SAAAC,GACpC,MAAuC,OAAhCA,EAAKC,UAAUC,eACrBC,IAAI,SAAAH,GAEL,MADAA,GAAKC,UAAU3B,WAAa0B,EAAKC,UAAUG,WAAWhB,MAAM,KAAK,GAAK,IAAM/B,EAAKsC,QAAQK,EAAKC,UAAUI,iBAAmB,MAAQhD,EAAKsC,QAAQK,EAAKC,UAAUK,eACxJN,IAET3C,EAAKJ,SAAWI,EAAKoB,UAAU,GAAGwB,UAAUhD,SAC5CI,EAAKe,WAAaf,EAAKoB,UAAU,GAAGwB,UAAU7B,WAC9Cf,EAAKiB,WAAajB,EAAKoB,UAAU,GAAGwB,UAAU3B,WACxB,YAAlBjB,EAAKyB,SACPzB,EAAKgB,QAAUhB,EAAKoB,UAAU,GAAGJ,QAEjChB,EAAKgB,QAAUhB,EAAKoB,UAAU,GAAG8B,QAAQlC,cCzIrDmC,EAAA,WAA0B,GAAAC,GAAArF,KAAasF,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CAAwB,OAAAE,GAAA,OAAiBE,YAAA,iBAA2BF,EAAA,OAAYE,YAAA,gBAA0BF,EAAA,OAAYE,YAAA,gBAA0BF,EAAA,SAAAH,EAAAM,GAAA,WAAAN,EAAAM,GAAA,KAAAH,EAAA,QAAAH,EAAAM,GAAAN,EAAAO,GAAAP,EAAArC,iBAAAqC,EAAAM,GAAA,KAAAH,EAAA,OAAgHE,YAAA,gBAA0BF,EAAA,SAAAH,EAAAM,GAAA,WAAAN,EAAAM,GAAA,KAAAH,EAAA,QAAAH,EAAAM,GAAAN,EAAAO,GAAAP,EAAAnC,iBAAAmC,EAAAM,GAAA,KAAAH,EAAA,OAAgHE,YAAA,gBAA0BF,EAAA,SAAAH,EAAAM,GAAA,WAAAN,EAAAM,GAAA,KAAAH,EAAA,QAAAH,EAAAM,GAAAN,EAAAO,GAAAP,EAAApC,gBAAAoC,EAAAM,GAAA,KAAAH,EAAA,OAA+GE,YAAA,cAAwBF,EAAA,OAAYE,YAAA,sBAAgCL,EAAAQ,GAAAR,EAAA,mBAAAT,GAAwC,WAAAS,EAAAlC,UAAA2C,OAAAN,EAAA,OAA8CE,YAAA,eAAyB,SAAAd,EAAAX,KAAAuB,EAAA,OAAmCE,YAAA,sBAAgCF,EAAA,OAAYE,YAAA,YAAAK,OAA+BC,IAAAX,EAAA1F,WAAmB0F,EAAAM,GAAA,KAAAH,EAAA,OAAwBE,YAAA,gBAA0BF,EAAA,OAAYE,YAAA,aAAuBL,EAAAM,GAAAN,EAAAO,GAAAhB,EAAAV,SAAAmB,EAAAM,GAAA,KAAAH,EAAA,OAAoDE,YAAA,aAAuBL,EAAAM,GAAAN,EAAAO,GAAAhB,EAAAf,aAAAwB,EAAAY,KAAAZ,EAAAM,GAAA,eAAAf,EAAAX,KAAAuB,EAAA,OAAyFE,YAAA,uBAAiCF,EAAA,OAAYE,YAAA,YAAAK,OAA+BC,IAAAX,EAAAhG,YAAoBgG,EAAAM,GAAA,KAAAH,EAAA,OAAwBE,YAAA,gBAA0BF,EAAA,OAAYE,YAAA,aAAuBL,EAAAM,GAAAN,EAAAO,GAAAhB,EAAAV,SAAAmB,EAAAM,GAAA,KAAAH,EAAA,OAAoDE,YAAA,aAAuBL,EAAAM,GAAAN,EAAAO,GAAAhB,EAAAf,aAAAwB,EAAAY,OAAAZ,EAAAY,OAAsDZ,EAAAM,GAAA,SAAAN,EAAAlC,UAAA2C,OAAAN,EAAA,OAAqDE,YAAA,2BAAqCL,EAAAM,GAAA,8BAAAN,EAAAY,MAAA,KAAAZ,EAAAM,GAAA,KAAAH,EAAA,OAA4EE,YAAA,aAAuBF,EAAA,OAAYE,YAAA,aAAuBF,EAAA,SAAcU,aAAahH,KAAA,QAAAiH,QAAA,UAAA5H,MAAA8G,EAAA,QAAAe,WAAA,YAAwEL,OAAS7D,KAAA,QAAcmE,UAAW9H,MAAA8G,EAAA,SAAsBiB,IAAKC,MAAA,SAAAC,GAAyB,gBAAAA,KAAAnB,EAAAoB,GAAAD,EAAAE,QAAA,WAAAF,EAAAG,IAAA,SAA+FtB,EAAAzB,UAAA4C,GAAf,MAA4CI,MAAA,SAAAJ,GAA0BA,EAAAK,OAAAC,YAAsCzB,EAAAjC,QAAAoD,EAAAK,OAAAtI,WAAkC8G,EAAAM,GAAA,KAAAH,EAAA,OAAwBE,YAAA,WAAAqB,OAA8BC,eAAA3B,EAAA/B,aAAgCgD,IAAKW,MAAA,SAAAT,GAAkD,MAAzBA,GAAAU,kBAAyB7B,EAAAzB,UAAA4C,OAA+BnB,EAAAM,GAAA,eAC1tEwB,KACAC,GAAiBhC,SAAA+B,mBACFE,EAAA,EHAfC,EAAyBlK,EAAQ,QASjCmK,EAAApJ,EAKAqJ,EAAAF,EACExE,EACAuE,GATF,EAWAE,EAPA,kBAEA,KAUerJ,GAAA,QAAAsJ,EAAiB","file":"js/10.fbedf484ba2fed9f0fde.js","sourcesContent":["webpackJsonp([10],{\n\n/***/ \"P0Bz\":\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(\"FZ+f\")(true);\n// imports\n\n\n// module\nexports.push([module.i, \"\\n.green[data-v-444e41ba] {\\n  color: #03b349;\\n}\\n.doing-course[data-v-444e41ba] {\\n  padding-bottom: 50px;\\n}\\n.course-info[data-v-444e41ba] {\\n  line-height: 2;\\n  margin: 10px 0;\\n  background: #fff;\\n  padding: 10px 20px;\\n}\\n.chart-box[data-v-444e41ba] {\\n  height: calc(100% - 120px);\\n  overflow: hidden;\\n  line-height: 2;\\n  margin: 10px 0 0 0;\\n  padding: 10px 0 0 0;\\n}\\n.chart-list-scroll[data-v-444e41ba] {\\n  padding: 0 20px;\\n  height: 100%;\\n  overflow: auto;\\n}\\n.chart-empty[data-v-444e41ba] {\\n  color: #aaa;\\n  padding: 80px 0;\\n  text-align: center;\\n}\\n.msg-item[data-v-444e41ba] {\\n  position: relative;\\n  margin-bottom: 14px;\\n}\\n.msg-item .user-icon[data-v-444e41ba] {\\n    position: absolute;\\n    width: 30px;\\n    height: 30px;\\n    border: 2px solid #03b349;\\n    border-radius: 40px;\\n}\\n.msg-item .msg-time[data-v-444e41ba] {\\n    line-height: 1.3;\\n    color: #aaa;\\n}\\n.msg-item .msg-text[data-v-444e41ba] {\\n    min-height: 26px;\\n    display: inline-block;\\n    background: #fff;\\n    border: 1px solid #03b349;\\n    border-radius: 5px;\\n    padding: 0 20px;\\n    max-width: 100%;\\n    word-break: break-all;\\n    text-align: left;\\n}\\n.msg-item.msg-self .user-icon[data-v-444e41ba] {\\n    right: 0;\\n}\\n.msg-item.msg-self .msg-content[data-v-444e41ba] {\\n    padding-right: 50px;\\n    text-align: right;\\n}\\n.msg-item.msg-other .user-icon[data-v-444e41ba] {\\n    left: 0;\\n}\\n.msg-item.msg-other .msg-content[data-v-444e41ba] {\\n    padding-left: 50px;\\n}\\n.send-msg[data-v-444e41ba] {\\n  position: fixed;\\n  bottom: 0;\\n  width: 100%;\\n  line-height: 2;\\n  background: #fbf9fe;\\n  padding: 0 0 6px 0;\\n}\\n.send-msg .send-box[data-v-444e41ba] {\\n    border: 1px solid #eaeaea;\\n    border-width: 1px 0;\\n    background: #fff;\\n    height: 40px;\\n    position: relative;\\n}\\n.send-msg input[data-v-444e41ba] {\\n    height: 40px;\\n    width: calc(100% - 80px);\\n    font-size: 14px;\\n    padding: 0 70px 0 10px;\\n    outline: 0;\\n    border: 0;\\n}\\n.send-msg .send-btn[data-v-444e41ba] {\\n    background: #03b349;\\n    position: absolute;\\n    top: 0;\\n    right: 10px;\\n    color: #fff;\\n    padding: 0px 10px;\\n    margin: 8px 0;\\n    border-radius: 5px;\\n}\\n.send-msg .send-btn.btn-disabled[data-v-444e41ba] {\\n      background: #eee;\\n      color: #aaa;\\n}\\n\", \"\", {\"version\":3,\"sources\":[\"/Users/lh/work/zk/fe/src/chart/index.vue\"],\"names\":[],\"mappings\":\";AACA;EACE,eAAe;CAChB;AACD;EACE,qBAAqB;CACtB;AACD;EACE,eAAe;EACf,eAAe;EACf,iBAAiB;EACjB,mBAAmB;CACpB;AACD;EACE,2BAA2B;EAC3B,iBAAiB;EACjB,eAAe;EACf,mBAAmB;EACnB,oBAAoB;CACrB;AACD;EACE,gBAAgB;EAChB,aAAa;EACb,eAAe;CAChB;AACD;EACE,YAAY;EACZ,gBAAgB;EAChB,mBAAmB;CACpB;AACD;EACE,mBAAmB;EACnB,oBAAoB;CACrB;AACD;IACI,mBAAmB;IACnB,YAAY;IACZ,aAAa;IACb,0BAA0B;IAC1B,oBAAoB;CACvB;AACD;IACI,iBAAiB;IACjB,YAAY;CACf;AACD;IACI,iBAAiB;IACjB,sBAAsB;IACtB,iBAAiB;IACjB,0BAA0B;IAC1B,mBAAmB;IACnB,gBAAgB;IAChB,gBAAgB;IAChB,sBAAsB;IACtB,iBAAiB;CACpB;AACD;IACI,SAAS;CACZ;AACD;IACI,oBAAoB;IACpB,kBAAkB;CACrB;AACD;IACI,QAAQ;CACX;AACD;IACI,mBAAmB;CACtB;AACD;EACE,gBAAgB;EAChB,UAAU;EACV,YAAY;EACZ,eAAe;EACf,oBAAoB;EACpB,mBAAmB;CACpB;AACD;IACI,0BAA0B;IAC1B,oBAAoB;IACpB,iBAAiB;IACjB,aAAa;IACb,mBAAmB;CACtB;AACD;IACI,aAAa;IACb,yBAAyB;IACzB,gBAAgB;IAChB,uBAAuB;IACvB,WAAW;IACX,UAAU;CACb;AACD;IACI,oBAAoB;IACpB,mBAAmB;IACnB,OAAO;IACP,YAAY;IACZ,YAAY;IACZ,kBAAkB;IAClB,cAAc;IACd,mBAAmB;CACtB;AACD;MACM,iBAAiB;MACjB,YAAY;CACjB\",\"file\":\"index.vue\",\"sourcesContent\":[\"\\n.green[data-v-444e41ba] {\\n  color: #03b349;\\n}\\n.doing-course[data-v-444e41ba] {\\n  padding-bottom: 50px;\\n}\\n.course-info[data-v-444e41ba] {\\n  line-height: 2;\\n  margin: 10px 0;\\n  background: #fff;\\n  padding: 10px 20px;\\n}\\n.chart-box[data-v-444e41ba] {\\n  height: calc(100% - 120px);\\n  overflow: hidden;\\n  line-height: 2;\\n  margin: 10px 0 0 0;\\n  padding: 10px 0 0 0;\\n}\\n.chart-list-scroll[data-v-444e41ba] {\\n  padding: 0 20px;\\n  height: 100%;\\n  overflow: auto;\\n}\\n.chart-empty[data-v-444e41ba] {\\n  color: #aaa;\\n  padding: 80px 0;\\n  text-align: center;\\n}\\n.msg-item[data-v-444e41ba] {\\n  position: relative;\\n  margin-bottom: 14px;\\n}\\n.msg-item .user-icon[data-v-444e41ba] {\\n    position: absolute;\\n    width: 30px;\\n    height: 30px;\\n    border: 2px solid #03b349;\\n    border-radius: 40px;\\n}\\n.msg-item .msg-time[data-v-444e41ba] {\\n    line-height: 1.3;\\n    color: #aaa;\\n}\\n.msg-item .msg-text[data-v-444e41ba] {\\n    min-height: 26px;\\n    display: inline-block;\\n    background: #fff;\\n    border: 1px solid #03b349;\\n    border-radius: 5px;\\n    padding: 0 20px;\\n    max-width: 100%;\\n    word-break: break-all;\\n    text-align: left;\\n}\\n.msg-item.msg-self .user-icon[data-v-444e41ba] {\\n    right: 0;\\n}\\n.msg-item.msg-self .msg-content[data-v-444e41ba] {\\n    padding-right: 50px;\\n    text-align: right;\\n}\\n.msg-item.msg-other .user-icon[data-v-444e41ba] {\\n    left: 0;\\n}\\n.msg-item.msg-other .msg-content[data-v-444e41ba] {\\n    padding-left: 50px;\\n}\\n.send-msg[data-v-444e41ba] {\\n  position: fixed;\\n  bottom: 0;\\n  width: 100%;\\n  line-height: 2;\\n  background: #fbf9fe;\\n  padding: 0 0 6px 0;\\n}\\n.send-msg .send-box[data-v-444e41ba] {\\n    border: 1px solid #eaeaea;\\n    border-width: 1px 0;\\n    background: #fff;\\n    height: 40px;\\n    position: relative;\\n}\\n.send-msg input[data-v-444e41ba] {\\n    height: 40px;\\n    width: calc(100% - 80px);\\n    font-size: 14px;\\n    padding: 0 70px 0 10px;\\n    outline: 0;\\n    border: 0;\\n}\\n.send-msg .send-btn[data-v-444e41ba] {\\n    background: #03b349;\\n    position: absolute;\\n    top: 0;\\n    right: 10px;\\n    color: #fff;\\n    padding: 0px 10px;\\n    margin: 8px 0;\\n    border-radius: 5px;\\n}\\n.send-msg .send-btn.btn-disabled[data-v-444e41ba] {\\n      background: #eee;\\n      color: #aaa;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ \"THry\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(\"P0Bz\");\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(\"rjj0\")(\"066f3e13\", content, true, {});\n\n/***/ }),\n\n/***/ \"Yid5\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// EXTERNAL MODULE: ./src/utils/request.js\nvar request = __webpack_require__(\"vLgD\");\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/core-js/promise.js\nvar promise = __webpack_require__(\"//Fk\");\nvar promise_default = /*#__PURE__*/__webpack_require__.n(promise);\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/core-js/json/stringify.js\nvar stringify = __webpack_require__(\"mvHQ\");\nvar stringify_default = /*#__PURE__*/__webpack_require__.n(stringify);\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/helpers/extends.js\nvar helpers_extends = __webpack_require__(\"Dd8w\");\nvar extends_default = /*#__PURE__*/__webpack_require__.n(helpers_extends);\n\n// EXTERNAL MODULE: ./node_modules/vuex/dist/vuex.esm.js\nvar vuex_esm = __webpack_require__(\"NYxO\");\n\n// CONCATENATED MODULE: ./src/chart/chartSocket.js\n\n\n\n\n\n/* harmony default export */ var chartSocket = ({\n  name: 'chartMixin',\n  data: function data() {\n    return {\n      ws: null,\n      otherImg: ''\n    };\n  },\n\n  computed: extends_default()({}, Object(vuex_esm[\"b\" /* mapState */])({\n    openid: function openid(state) {\n      return state.user.openid;\n    },\n    selfImg: function selfImg(state) {\n      return state.user.infoObj.teaHeadimgurl || state.user.infoObj.stuHeadimgurl;\n    }\n    // courseId: state => state.course.courseId\n  })),\n  mounted: function mounted() {\n    this.initWebsocket();\n  },\n\n  methods: {\n    initWebsocket: function initWebsocket() {\n      if (this.ws === null) {\n        var url = 'ws://47.93.225.12:8082/socketServer/' + this.openid;\n        this.ws = new WebSocket(url);\n\n        this.ws.onopen = this.websocketonopen;\n        this.ws.onmessage = this.websocketonmessage;\n        this.ws.onerror = this.websocketonerror;\n        this.ws.onclose = this.websocketclose;\n      }\n    },\n    websocketonopen: function websocketonopen() {\n      this.addGroup();\n      // this.websocketsend(JSON.stringify(req))\n    },\n    websocketonmessage: function websocketonmessage(res) {\n      var resData = JSON.parse(res.data);\n      if (resData.opttype === 'SendToChatGroup') {\n        this.recSocketMsg(resData);\n      }\n      console.log(resData);\n    },\n    websocketonerror: function websocketonerror() {\n      this.initWebSocket();\n    },\n    websocketsend: function websocketsend(req) {\n      this.ws.send(stringify_default()(req));\n    },\n    websocketclose: function websocketclose(e) {\n      console.log('断开连接', e);\n    },\n\n    // 创建群组，并加入\n    addGroup: function addGroup() {\n      var req = {\n        addusername: this.openid, // \"stuopenid\"\n        groupname: this.courseId, // \"courseid\"\n        opttype: 'CreateChatGroup',\n        username: this.openid // \"stuopenid\"\n      };\n      this.websocketsend(req);\n    },\n\n    // socket发送消息\n    sendSocketMsg: function sendSocketMsg(msg) {\n      var req = {\n        content: msg,\n        groupname: this.courseId, // \"courseid\"\n        opttype: 'SendToChatGroup',\n        username: this.openid\n      };\n      this.websocketsend(req);\n    },\n\n    // socket接收消息\n    recSocketMsg: function recSocketMsg(data) {\n      var _this = this;\n\n      console.log(data);\n      var type = data.username === this.openid ? 'self' : 'other';\n      console.log(type);\n      new promise_default.a(function (resolve) {\n        _this.getInfo(data.username, type, resolve);\n      }).then(function () {\n        _this.sendMsgFn(type, data.content);\n      });\n    },\n    getInfo: function getInfo(openid, type, resolve) {\n      if (type === 'self' && this['selfImg'] === '') {\n        this._getImg(openid, 'self', resolve);\n      }\n      if (type === 'other' && this['otherImg'] === '') {\n        this._getImg(openid, 'other', resolve);\n      }\n    },\n    _getImg: function _getImg(openid, type, resolve) {\n      var _this2 = this;\n\n      Object(request[\"a\" /* default */])({\n        url: 'http://www.zhiheyikaoqin.cn/user/queryUserInfo?openid=' + openid,\n        method: 'get'\n      }).then(function (res) {\n        resolve();\n        if (Number(res.data.code) === 0) {\n          var obj = res.data.data;\n          console.log('obj', obj, type);\n          _this2[type + 'Img'] = obj.stuHeadimgurl || obj.teaHeadimgurl;\n        }\n      }, 20);\n    }\n  }\n});\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vux-loader/src/script-loader.js!./node_modules/vux-loader/src/script-loader.js!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/chart/index.vue\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ var chart = ({\n  name: 'chart',\n  mixins: [chartSocket],\n  data: function data() {\n    return {\n      courseName: '',\n      teaName: '',\n      courseTime: '',\n      chartList: [],\n      sendMsg: '',\n      courseId: '44',\n      doingList: []\n    };\n  },\n\n  computed: {\n    btnDisabled: function btnDisabled() {\n      return this.sendMsg === '';\n    },\n    teaOpenid: function teaOpenid() {\n      return this.$store.state.user.infoObj.teaOpenid || '';\n    },\n    stuOpenid: function stuOpenid() {\n      return this.$store.state.user.infoObj.stuOpenid || '';\n    },\n    userType: function userType() {\n      return this.$store.state.user.userType;\n    }\n  },\n  mounted: function mounted() {\n    this.getDoingList();\n  },\n\n  methods: {\n    clickSend: function clickSend() {\n      this.sendSocketMsg(this.sendMsg);\n      this.sendMsgFn('self', this.sendMsg);\n    },\n    sendMsgFn: function sendMsgFn(type, msg) {\n      console.log('dd', type, msg);\n      if (msg === '') {\n        return;\n      }\n      var time = new Date().toTimeString().split(' ')[0];\n      this.chartList.push({\n        time: time,\n        role: type,\n        text: msg\n      });\n      this.$nextTick(function () {\n        document.querySelector('.chart-list-scroll').scrollTop = 999999;\n      });\n      if (type === 'self') {\n        this.sendMsg = '';\n      }\n    },\n    getTime: function getTime(str) {\n      var hour = str.split(' ')[1].split(':')[0];\n      var min = str.split(' ')[1].split(':')[1];\n      return hour + ':' + min;\n    },\n    getDoingList: function getDoingList() {\n      var _this = this;\n\n      var url = '';\n      if (this.userType === 'teacher') {\n        url = 'http://www.zhiheyikaoqin.cn/tea/findTeaHistoryCourse';\n        url += '?teaOpenid=' + this.teaOpenid + '&page=1&pageSize=1000';\n      } else if (this.userType === 'student') {\n        url = 'http://www.zhiheyikaoqin.cn/stu/lookHistory';\n        url += '?stuOpenid=' + this.stuOpenid + '&page=1&pageSize=1000';\n      }\n      Object(request[\"a\" /* default */])({\n        url: url,\n        method: 'get'\n      }).then(function (res) {\n        _this.loading = false;\n        if (res.data.code === 0 && res.data.data !== undefined) {\n          _this.doingList = res.data.data.filter(function (item) {\n            return item.teaCourse.courseStatus === 302;\n          }).map(function (item) {\n            item.teaCourse.courseTime = item.teaCourse.courseDate.split(' ')[0] + ' ' + _this.getTime(item.teaCourse.courseStartTime) + ' - ' + _this.getTime(item.teaCourse.courseEndTime);\n            return item;\n          });\n          _this.courseId = _this.doingList[0].teaCourse.courseId;\n          _this.courseName = _this.doingList[0].teaCourse.courseName;\n          _this.courseTime = _this.doingList[0].teaCourse.courseTime;\n          if (_this.userType === 'student') {\n            _this.teaName = _this.doingList[0].teaName;\n          } else {\n            _this.teaName = _this.doingList[0].teaBase.teaName;\n          }\n        }\n      });\n    }\n  }\n});\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vux-loader/src/script-loader.js!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/chart/index.vue\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ var selectortype_script_index_0_src_chart = ({\n  name: 'chart',\n  mixins: [chartSocket],\n  data: function data() {\n    return {\n      courseName: '',\n      teaName: '',\n      courseTime: '',\n      chartList: [],\n      sendMsg: '',\n      courseId: '44',\n      doingList: []\n    };\n  },\n\n  computed: {\n    btnDisabled: function btnDisabled() {\n      return this.sendMsg === '';\n    },\n    teaOpenid: function teaOpenid() {\n      return this.$store.state.user.infoObj.teaOpenid || '';\n    },\n    stuOpenid: function stuOpenid() {\n      return this.$store.state.user.infoObj.stuOpenid || '';\n    },\n    userType: function userType() {\n      return this.$store.state.user.userType;\n    }\n  },\n  mounted: function mounted() {\n    this.getDoingList();\n  },\n\n  methods: {\n    clickSend: function clickSend() {\n      this.sendSocketMsg(this.sendMsg);\n      this.sendMsgFn('self', this.sendMsg);\n    },\n    sendMsgFn: function sendMsgFn(type, msg) {\n      console.log('dd', type, msg);\n      if (msg === '') {\n        return;\n      }\n      var time = new Date().toTimeString().split(' ')[0];\n      this.chartList.push({\n        time: time,\n        role: type,\n        text: msg\n      });\n      this.$nextTick(function () {\n        document.querySelector('.chart-list-scroll').scrollTop = 999999;\n      });\n      if (type === 'self') {\n        this.sendMsg = '';\n      }\n    },\n    getTime: function getTime(str) {\n      var hour = str.split(' ')[1].split(':')[0];\n      var min = str.split(' ')[1].split(':')[1];\n      return hour + ':' + min;\n    },\n    getDoingList: function getDoingList() {\n      var _this = this;\n\n      var url = '';\n      if (this.userType === 'teacher') {\n        url = 'http://www.zhiheyikaoqin.cn/tea/findTeaHistoryCourse';\n        url += '?teaOpenid=' + this.teaOpenid + '&page=1&pageSize=1000';\n      } else if (this.userType === 'student') {\n        url = 'http://www.zhiheyikaoqin.cn/stu/lookHistory';\n        url += '?stuOpenid=' + this.stuOpenid + '&page=1&pageSize=1000';\n      }\n      Object(request[\"a\" /* default */])({\n        url: url,\n        method: 'get'\n      }).then(function (res) {\n        _this.loading = false;\n        if (res.data.code === 0 && res.data.data !== undefined) {\n          _this.doingList = res.data.data.filter(function (item) {\n            return item.teaCourse.courseStatus === 302;\n          }).map(function (item) {\n            item.teaCourse.courseTime = item.teaCourse.courseDate.split(' ')[0] + ' ' + _this.getTime(item.teaCourse.courseStartTime) + ' - ' + _this.getTime(item.teaCourse.courseEndTime);\n            return item;\n          });\n          _this.courseId = _this.doingList[0].teaCourse.courseId;\n          _this.courseName = _this.doingList[0].teaCourse.courseName;\n          _this.courseTime = _this.doingList[0].teaCourse.courseTime;\n          if (_this.userType === 'student') {\n            _this.teaName = _this.doingList[0].teaName;\n          } else {\n            _this.teaName = _this.doingList[0].teaBase.teaName;\n          }\n        }\n      });\n    }\n  }\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-444e41ba\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vux-loader/src/before-template-compiler-loader.js!./node_modules/vux-loader/src/template-loader.js!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/chart/index.vue\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"doing-course\"},[_c('div',{staticClass:\"course-info\"},[_c('div',{staticClass:\"course-name\"},[_c('label',[_vm._v(\"课程名称：\")]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.courseName))])]),_vm._v(\" \"),_c('div',{staticClass:\"course-time\"},[_c('label',[_vm._v(\"课程时间：\")]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.courseTime))])]),_vm._v(\" \"),_c('div',{staticClass:\"course-time\"},[_c('label',[_vm._v(\"老师姓名：\")]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.teaName))])])]),_vm._v(\" \"),_c('div',{staticClass:\"chart-box\"},[_c('div',{staticClass:\"chart-list-scroll\"},[_vm._l((_vm.chartList),function(item){return (_vm.chartList.length !== 0)?_c('div',{staticClass:\"chart-list\"},[(item.role === 'self')?_c('div',{staticClass:\"msg-self msg-item\"},[_c('img',{staticClass:\"user-icon\",attrs:{\"src\":_vm.selfImg}}),_vm._v(\" \"),_c('div',{staticClass:\"msg-content\"},[_c('div',{staticClass:\"msg-text\"},[_vm._v(_vm._s(item.text))]),_vm._v(\" \"),_c('div',{staticClass:\"msg-time\"},[_vm._v(_vm._s(item.time))])])]):_vm._e(),_vm._v(\" \"),(item.role === 'other')?_c('div',{staticClass:\"msg-other msg-item\"},[_c('img',{staticClass:\"user-icon\",attrs:{\"src\":_vm.otherImg}}),_vm._v(\" \"),_c('div',{staticClass:\"msg-content\"},[_c('div',{staticClass:\"msg-text\"},[_vm._v(_vm._s(item.text))]),_vm._v(\" \"),_c('div',{staticClass:\"msg-time\"},[_vm._v(_vm._s(item.time))])])]):_vm._e()]):_vm._e()}),_vm._v(\" \"),(_vm.chartList.length === 0)?_c('div',{staticClass:\"chart-list chart-empty\"},[_vm._v(\"\\n        暂无聊天记录\\n      \")]):_vm._e()],2)]),_vm._v(\" \"),_c('div',{staticClass:\"send-msg\"},[_c('div',{staticClass:\"send-box\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.sendMsg),expression:\"sendMsg\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.sendMsg)},on:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.clickSend($event)},\"input\":function($event){if($event.target.composing){ return; }_vm.sendMsg=$event.target.value}}}),_vm._v(\" \"),_c('div',{staticClass:\"send-btn\",class:{'btn-disabled': _vm.btnDisabled},on:{\"click\":function($event){$event.stopPropagation();return _vm.clickSend($event)}}},[_vm._v(\"发送\")])])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ var selectortype_template_index_0_src_chart = (esExports);\n// CONCATENATED MODULE: ./src/chart/index.vue\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"THry\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-444e41ba\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  selectortype_script_index_0_src_chart,\n  selectortype_template_index_0_src_chart,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ var src_chart = __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// js/10.fbedf484ba2fed9f0fde.js","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"\\n.green[data-v-444e41ba] {\\n  color: #03b349;\\n}\\n.doing-course[data-v-444e41ba] {\\n  padding-bottom: 50px;\\n}\\n.course-info[data-v-444e41ba] {\\n  line-height: 2;\\n  margin: 10px 0;\\n  background: #fff;\\n  padding: 10px 20px;\\n}\\n.chart-box[data-v-444e41ba] {\\n  height: calc(100% - 120px);\\n  overflow: hidden;\\n  line-height: 2;\\n  margin: 10px 0 0 0;\\n  padding: 10px 0 0 0;\\n}\\n.chart-list-scroll[data-v-444e41ba] {\\n  padding: 0 20px;\\n  height: 100%;\\n  overflow: auto;\\n}\\n.chart-empty[data-v-444e41ba] {\\n  color: #aaa;\\n  padding: 80px 0;\\n  text-align: center;\\n}\\n.msg-item[data-v-444e41ba] {\\n  position: relative;\\n  margin-bottom: 14px;\\n}\\n.msg-item .user-icon[data-v-444e41ba] {\\n    position: absolute;\\n    width: 30px;\\n    height: 30px;\\n    border: 2px solid #03b349;\\n    border-radius: 40px;\\n}\\n.msg-item .msg-time[data-v-444e41ba] {\\n    line-height: 1.3;\\n    color: #aaa;\\n}\\n.msg-item .msg-text[data-v-444e41ba] {\\n    min-height: 26px;\\n    display: inline-block;\\n    background: #fff;\\n    border: 1px solid #03b349;\\n    border-radius: 5px;\\n    padding: 0 20px;\\n    max-width: 100%;\\n    word-break: break-all;\\n    text-align: left;\\n}\\n.msg-item.msg-self .user-icon[data-v-444e41ba] {\\n    right: 0;\\n}\\n.msg-item.msg-self .msg-content[data-v-444e41ba] {\\n    padding-right: 50px;\\n    text-align: right;\\n}\\n.msg-item.msg-other .user-icon[data-v-444e41ba] {\\n    left: 0;\\n}\\n.msg-item.msg-other .msg-content[data-v-444e41ba] {\\n    padding-left: 50px;\\n}\\n.send-msg[data-v-444e41ba] {\\n  position: fixed;\\n  bottom: 0;\\n  width: 100%;\\n  line-height: 2;\\n  background: #fbf9fe;\\n  padding: 0 0 6px 0;\\n}\\n.send-msg .send-box[data-v-444e41ba] {\\n    border: 1px solid #eaeaea;\\n    border-width: 1px 0;\\n    background: #fff;\\n    height: 40px;\\n    position: relative;\\n}\\n.send-msg input[data-v-444e41ba] {\\n    height: 40px;\\n    width: calc(100% - 80px);\\n    font-size: 14px;\\n    padding: 0 70px 0 10px;\\n    outline: 0;\\n    border: 0;\\n}\\n.send-msg .send-btn[data-v-444e41ba] {\\n    background: #03b349;\\n    position: absolute;\\n    top: 0;\\n    right: 10px;\\n    color: #fff;\\n    padding: 0px 10px;\\n    margin: 8px 0;\\n    border-radius: 5px;\\n}\\n.send-msg .send-btn.btn-disabled[data-v-444e41ba] {\\n      background: #eee;\\n      color: #aaa;\\n}\\n\", \"\", {\"version\":3,\"sources\":[\"/Users/lh/work/zk/fe/src/chart/index.vue\"],\"names\":[],\"mappings\":\";AACA;EACE,eAAe;CAChB;AACD;EACE,qBAAqB;CACtB;AACD;EACE,eAAe;EACf,eAAe;EACf,iBAAiB;EACjB,mBAAmB;CACpB;AACD;EACE,2BAA2B;EAC3B,iBAAiB;EACjB,eAAe;EACf,mBAAmB;EACnB,oBAAoB;CACrB;AACD;EACE,gBAAgB;EAChB,aAAa;EACb,eAAe;CAChB;AACD;EACE,YAAY;EACZ,gBAAgB;EAChB,mBAAmB;CACpB;AACD;EACE,mBAAmB;EACnB,oBAAoB;CACrB;AACD;IACI,mBAAmB;IACnB,YAAY;IACZ,aAAa;IACb,0BAA0B;IAC1B,oBAAoB;CACvB;AACD;IACI,iBAAiB;IACjB,YAAY;CACf;AACD;IACI,iBAAiB;IACjB,sBAAsB;IACtB,iBAAiB;IACjB,0BAA0B;IAC1B,mBAAmB;IACnB,gBAAgB;IAChB,gBAAgB;IAChB,sBAAsB;IACtB,iBAAiB;CACpB;AACD;IACI,SAAS;CACZ;AACD;IACI,oBAAoB;IACpB,kBAAkB;CACrB;AACD;IACI,QAAQ;CACX;AACD;IACI,mBAAmB;CACtB;AACD;EACE,gBAAgB;EAChB,UAAU;EACV,YAAY;EACZ,eAAe;EACf,oBAAoB;EACpB,mBAAmB;CACpB;AACD;IACI,0BAA0B;IAC1B,oBAAoB;IACpB,iBAAiB;IACjB,aAAa;IACb,mBAAmB;CACtB;AACD;IACI,aAAa;IACb,yBAAyB;IACzB,gBAAgB;IAChB,uBAAuB;IACvB,WAAW;IACX,UAAU;CACb;AACD;IACI,oBAAoB;IACpB,mBAAmB;IACnB,OAAO;IACP,YAAY;IACZ,YAAY;IACZ,kBAAkB;IAClB,cAAc;IACd,mBAAmB;CACtB;AACD;MACM,iBAAiB;MACjB,YAAY;CACjB\",\"file\":\"index.vue\",\"sourcesContent\":[\"\\n.green[data-v-444e41ba] {\\n  color: #03b349;\\n}\\n.doing-course[data-v-444e41ba] {\\n  padding-bottom: 50px;\\n}\\n.course-info[data-v-444e41ba] {\\n  line-height: 2;\\n  margin: 10px 0;\\n  background: #fff;\\n  padding: 10px 20px;\\n}\\n.chart-box[data-v-444e41ba] {\\n  height: calc(100% - 120px);\\n  overflow: hidden;\\n  line-height: 2;\\n  margin: 10px 0 0 0;\\n  padding: 10px 0 0 0;\\n}\\n.chart-list-scroll[data-v-444e41ba] {\\n  padding: 0 20px;\\n  height: 100%;\\n  overflow: auto;\\n}\\n.chart-empty[data-v-444e41ba] {\\n  color: #aaa;\\n  padding: 80px 0;\\n  text-align: center;\\n}\\n.msg-item[data-v-444e41ba] {\\n  position: relative;\\n  margin-bottom: 14px;\\n}\\n.msg-item .user-icon[data-v-444e41ba] {\\n    position: absolute;\\n    width: 30px;\\n    height: 30px;\\n    border: 2px solid #03b349;\\n    border-radius: 40px;\\n}\\n.msg-item .msg-time[data-v-444e41ba] {\\n    line-height: 1.3;\\n    color: #aaa;\\n}\\n.msg-item .msg-text[data-v-444e41ba] {\\n    min-height: 26px;\\n    display: inline-block;\\n    background: #fff;\\n    border: 1px solid #03b349;\\n    border-radius: 5px;\\n    padding: 0 20px;\\n    max-width: 100%;\\n    word-break: break-all;\\n    text-align: left;\\n}\\n.msg-item.msg-self .user-icon[data-v-444e41ba] {\\n    right: 0;\\n}\\n.msg-item.msg-self .msg-content[data-v-444e41ba] {\\n    padding-right: 50px;\\n    text-align: right;\\n}\\n.msg-item.msg-other .user-icon[data-v-444e41ba] {\\n    left: 0;\\n}\\n.msg-item.msg-other .msg-content[data-v-444e41ba] {\\n    padding-left: 50px;\\n}\\n.send-msg[data-v-444e41ba] {\\n  position: fixed;\\n  bottom: 0;\\n  width: 100%;\\n  line-height: 2;\\n  background: #fbf9fe;\\n  padding: 0 0 6px 0;\\n}\\n.send-msg .send-box[data-v-444e41ba] {\\n    border: 1px solid #eaeaea;\\n    border-width: 1px 0;\\n    background: #fff;\\n    height: 40px;\\n    position: relative;\\n}\\n.send-msg input[data-v-444e41ba] {\\n    height: 40px;\\n    width: calc(100% - 80px);\\n    font-size: 14px;\\n    padding: 0 70px 0 10px;\\n    outline: 0;\\n    border: 0;\\n}\\n.send-msg .send-btn[data-v-444e41ba] {\\n    background: #03b349;\\n    position: absolute;\\n    top: 0;\\n    right: 10px;\\n    color: #fff;\\n    padding: 0px 10px;\\n    margin: 8px 0;\\n    border-radius: 5px;\\n}\\n.send-msg .send-btn.btn-disabled[data-v-444e41ba] {\\n      background: #eee;\\n      color: #aaa;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-444e41ba\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/sass-loader/lib/loader.js?{\"sourceMap\":true}!./node_modules/vux-loader/src/style-loader.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/chart/index.vue\n// module id = P0Bz\n// module chunks = 10","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-444e41ba\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/sass-loader/lib/loader.js?{\\\"sourceMap\\\":true}!../../node_modules/vux-loader/src/style-loader.js!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./index.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"066f3e13\", content, true, {});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-444e41ba\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/sass-loader/lib/loader.js?{\"sourceMap\":true}!./node_modules/vux-loader/src/style-loader.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/chart/index.vue\n// module id = THry\n// module chunks = 10","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-444e41ba\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vux-loader/src/style-loader.js!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vux-loader/src/script-loader.js!../../node_modules/vux-loader/src/script-loader.js!../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vux-loader/src/script-loader.js!../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-444e41ba\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../node_modules/vux-loader/src/template-loader.js!../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-444e41ba\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/chart/index.vue\n// module id = null\n// module chunks = ","import { mapState } from 'vuex'\nimport request from '../utils/request'\nexport default {\n  name: 'chartMixin',\n  data () {\n    return {\n      ws: null,\n      otherImg: ''\n    }\n  },\n  computed: {\n    ...mapState({\n      openid: state => state.user.openid,\n      selfImg: state => state.user.infoObj.teaHeadimgurl || state.user.infoObj.stuHeadimgurl\n      // courseId: state => state.course.courseId\n    })\n  },\n  mounted () {\n    this.initWebsocket()\n  },\n  methods: {\n    initWebsocket () {\n      if (this.ws === null) {\n        const url = 'ws://47.93.225.12:8082/socketServer/' + this.openid\n        this.ws = new WebSocket(url)\n\n        this.ws.onopen = this.websocketonopen\n        this.ws.onmessage = this.websocketonmessage\n        this.ws.onerror = this.websocketonerror\n        this.ws.onclose = this.websocketclose\n      }\n    },\n    websocketonopen () {\n      this.addGroup()\n      // this.websocketsend(JSON.stringify(req))\n    },\n    websocketonmessage (res) {\n      const resData = JSON.parse(res.data)\n      if (resData.opttype === 'SendToChatGroup') {\n        this.recSocketMsg(resData)\n      }\n      console.log(resData)\n    },\n    websocketonerror () {\n      this.initWebSocket()\n    },\n    websocketsend (req) {\n      this.ws.send(JSON.stringify(req))\n    },\n    websocketclose (e) {\n      console.log('断开连接', e)\n    },\n    // 创建群组，并加入\n    addGroup () {\n      const req = {\n        addusername: this.openid, // \"stuopenid\"\n        groupname: this.courseId, // \"courseid\"\n        opttype: 'CreateChatGroup',\n        username: this.openid // \"stuopenid\"\n      }\n      this.websocketsend(req)\n    },\n    // socket发送消息\n    sendSocketMsg (msg) {\n      const req = {\n        content: msg,\n        groupname: this.courseId, // \"courseid\"\n        opttype: 'SendToChatGroup',\n        username: this.openid\n      }\n      this.websocketsend(req)\n    },\n    // socket接收消息\n    recSocketMsg (data) {\n      console.log(data)\n      const type = (data.username === this.openid) ? 'self' : 'other'\n      console.log(type)\n      new Promise((resolve) => {\n        this.getInfo(data.username, type, resolve)\n      }).then(() => {\n        this.sendMsgFn(type, data.content)\n      })\n    },\n    getInfo (openid, type, resolve) {\n      if (type === 'self' && this['selfImg'] === '') {\n        this._getImg(openid, 'self', resolve)\n      }\n      if (type === 'other' && this['otherImg'] === '') {\n        this._getImg(openid, 'other', resolve)\n      }\n    },\n    _getImg (openid, type, resolve) {\n      request({\n        url: 'http://www.zhiheyikaoqin.cn/user/queryUserInfo?openid=' + openid,\n        method: 'get'\n      }).then(res => {\n        resolve()\n        if (Number(res.data.code) === 0) {\n          const obj = res.data.data\n          console.log('obj', obj, type)\n          this[type + 'Img'] = obj.stuHeadimgurl || obj.teaHeadimgurl\n        }\n      }, 20)\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/chart/chartSocket.js","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport request from '../utils/request'\nimport chartSocket from './chartSocket.js'\nexport default {\n  name: 'chart',\n  mixins: [chartSocket],\n  data () {\n    return {\n      courseName: '',\n      teaName: '',\n      courseTime: '',\n      chartList: [],\n      sendMsg: '',\n      courseId: '44',\n      doingList: []\n    }\n  },\n  computed: {\n    btnDisabled () {\n      return this.sendMsg === ''\n    },\n    teaOpenid () {\n      return this.$store.state.user.infoObj.teaOpenid || ''\n    },\n    stuOpenid () {\n      return this.$store.state.user.infoObj.stuOpenid || ''\n    },\n    userType () {\n      return this.$store.state.user.userType\n    }\n  },\n  mounted () {\n    this.getDoingList()\n  },\n  methods: {\n    clickSend () {\n      this.sendSocketMsg(this.sendMsg)\n      this.sendMsgFn('self', this.sendMsg)\n    },\n    sendMsgFn (type, msg) {\n      console.log('dd', type, msg)\n      if (msg === '') {\n        return\n      }\n      const time = new Date().toTimeString().split(' ')[0]\n      this.chartList.push({\n        time: time,\n        role: type,\n        text: msg\n      })\n      this.$nextTick(() => {\n        document.querySelector('.chart-list-scroll').scrollTop = 999999\n      })\n      if (type === 'self') {\n        this.sendMsg = ''\n      }\n    },\n    getTime (str) {\n      const hour = str.split(' ')[1].split(':')[0]\n      const min = str.split(' ')[1].split(':')[1]\n      return hour + ':' + min\n    },\n    getDoingList () {\n      let url = ''\n      if (this.userType === 'teacher') {\n        url = 'http://www.zhiheyikaoqin.cn/tea/findTeaHistoryCourse'\n        url += '?teaOpenid=' + this.teaOpenid + '&page=1&pageSize=1000'\n      } else if (this.userType === 'student') {\n        url = 'http://www.zhiheyikaoqin.cn/stu/lookHistory'\n        url += '?stuOpenid=' + this.stuOpenid + '&page=1&pageSize=1000'\n      }\n      request({\n        url: url,\n        method: 'get'\n      }).then(res => {\n        this.loading = false\n        if (res.data.code === 0 && res.data.data !== undefined) {\n          this.doingList = res.data.data.filter(item => {\n            return item.teaCourse.courseStatus === 302\n          }).map(item => {\n            item.teaCourse.courseTime = item.teaCourse.courseDate.split(' ')[0] + ' ' + this.getTime(item.teaCourse.courseStartTime) + ' - ' + this.getTime(item.teaCourse.courseEndTime)\n            return item\n          })\n          this.courseId = this.doingList[0].teaCourse.courseId\n          this.courseName = this.doingList[0].teaCourse.courseName\n          this.courseTime = this.doingList[0].teaCourse.courseTime\n          if (this.userType === 'student') {\n            this.teaName = this.doingList[0].teaName\n          } else {\n            this.teaName = this.doingList[0].teaBase.teaName\n          }\n        }\n      })\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/chart/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"doing-course\"},[_c('div',{staticClass:\"course-info\"},[_c('div',{staticClass:\"course-name\"},[_c('label',[_vm._v(\"课程名称：\")]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.courseName))])]),_vm._v(\" \"),_c('div',{staticClass:\"course-time\"},[_c('label',[_vm._v(\"课程时间：\")]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.courseTime))])]),_vm._v(\" \"),_c('div',{staticClass:\"course-time\"},[_c('label',[_vm._v(\"老师姓名：\")]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.teaName))])])]),_vm._v(\" \"),_c('div',{staticClass:\"chart-box\"},[_c('div',{staticClass:\"chart-list-scroll\"},[_vm._l((_vm.chartList),function(item){return (_vm.chartList.length !== 0)?_c('div',{staticClass:\"chart-list\"},[(item.role === 'self')?_c('div',{staticClass:\"msg-self msg-item\"},[_c('img',{staticClass:\"user-icon\",attrs:{\"src\":_vm.selfImg}}),_vm._v(\" \"),_c('div',{staticClass:\"msg-content\"},[_c('div',{staticClass:\"msg-text\"},[_vm._v(_vm._s(item.text))]),_vm._v(\" \"),_c('div',{staticClass:\"msg-time\"},[_vm._v(_vm._s(item.time))])])]):_vm._e(),_vm._v(\" \"),(item.role === 'other')?_c('div',{staticClass:\"msg-other msg-item\"},[_c('img',{staticClass:\"user-icon\",attrs:{\"src\":_vm.otherImg}}),_vm._v(\" \"),_c('div',{staticClass:\"msg-content\"},[_c('div',{staticClass:\"msg-text\"},[_vm._v(_vm._s(item.text))]),_vm._v(\" \"),_c('div',{staticClass:\"msg-time\"},[_vm._v(_vm._s(item.time))])])]):_vm._e()]):_vm._e()}),_vm._v(\" \"),(_vm.chartList.length === 0)?_c('div',{staticClass:\"chart-list chart-empty\"},[_vm._v(\"\\n        暂无聊天记录\\n      \")]):_vm._e()],2)]),_vm._v(\" \"),_c('div',{staticClass:\"send-msg\"},[_c('div',{staticClass:\"send-box\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.sendMsg),expression:\"sendMsg\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.sendMsg)},on:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.clickSend($event)},\"input\":function($event){if($event.target.composing){ return; }_vm.sendMsg=$event.target.value}}}),_vm._v(\" \"),_c('div',{staticClass:\"send-btn\",class:{'btn-disabled': _vm.btnDisabled},on:{\"click\":function($event){$event.stopPropagation();return _vm.clickSend($event)}}},[_vm._v(\"发送\")])])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-444e41ba\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vux-loader/src/before-template-compiler-loader.js!./node_modules/vux-loader/src/template-loader.js!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/chart/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}